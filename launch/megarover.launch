<!-- -->
<launch>
  <arg name="base_frame" default="/base_link"/>
  <arg name="topic_name" default="vehicle_model"/>
  <arg name="offset_x" default="1.2"/>
  <arg name="offset_y" default="0.0"/>
  <arg name="offset_z" default="0.0"/>
  <arg name="offset_roll" default="0.0"/> <!-- degree -->
  <arg name="offset_pitch" default="0.0"/> <!-- degree -->
  <arg name="offset_yaw" default="0.0"/> <!-- degree -->
  <arg name="model_path" default="$(find ndt_localizer)/urdf/megarover.urdf" />
  <arg name="gui" default="False" />

  <param name="robot_description" textfile="$(arg model_path)" />
  <param name="use_gui" value="$(arg gui)"/>
  <node name="joint_state_publisher" pkg="joint_state_publisher" type="joint_state_publisher" />
  <!-- <node name="robot_state_publisher" pkg="robot_state_publisher" type="state_publisher" /> -->
  <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher" />
  <node pkg="tf2_ros" type="static_transform_publisher" name="localizer_to_base_link" args="0 0 0.45 0 0 0 base_link livox_frame"/>
  <node pkg="tf2_ros" type="static_transform_publisher" name="livox_frame_to_imu_link" args="0.011 0.02329 -0.04412 0 0 0 livox_frame imu_link"/>

  <!-- Local EKF -->
  <node pkg="robot_localization" type="ekf_localization_node" name="ekf_localization">
      <rosparam command="load" file="$(find ndt_localizer)/cfgs/local_ekf_megarover.yaml" />
      <remap from="/odometry/filtered" to="/odometry/filtered/local" />
  </node>
  
  <!-- Global EKF  -->
    <node pkg="robot_localization" type="ekf_localization_node" name="ekf_localization_global">
        <rosparam command="load" file="$(find ndt_localizer)/cfgs/global_ekf.yaml" />
        <remap from="/odometry/filtered" to="/odometry/filtered/global" />
    </node>

</launch>